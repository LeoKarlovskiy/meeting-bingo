# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project

Meeting Bingo — a browser-based bingo game where buzzwords are auto-detected via live speech recognition during corporate meetings. Application code is not yet scaffolded, but architecture and implementation docs are complete in `docs/`.

## Stack

React 18 + TypeScript · Vite · Tailwind CSS · Web Speech API · `canvas-confetti` · Vercel

Fully client-side, no backend, no auth, zero cost.

## Development Commands

```bash
npm run dev        # Start dev server at localhost:3000
npm run build      # TypeScript check + Vite build
npm run preview    # Preview production build
npm run lint       # ESLint
npm run typecheck  # tsc --noEmit
```

Deploy: `vercel --prod` (no `vercel.json` needed — default Vite static config works)

## Architecture

### Screen Navigation

State-machine router in `src/App.tsx` using `useState<Screen>` (no router dep):

```
landing → category → game → win
```

### State Management

Global `GameState` in `App.tsx` passed down as props. No Context needed for MVP. `localStorage` key `meeting-bingo-game` persists state across reloads.

### Core Logic (`src/lib/`)

| File | Responsibility |
|------|---------------|
| `cardGenerator.ts` | Fisher-Yates shuffle → 5×5 grid, center is FREE space |
| `bingoChecker.ts` | Checks 5 rows + 5 cols + 2 diagonals for win |
| `wordDetector.ts` | Regex word-boundary match for single words, substring match for phrases; `WORD_ALIASES` map handles CI/CD, MVP, ROI, API, DevOps variants |
| `shareUtils.ts` | Web Share API with clipboard fallback |
| `utils.ts` | `cn()` className joiner |

### Key Types (`src/types/index.ts`)

- `GameStatus`: `'idle' | 'setup' | 'playing' | 'won'`
- `BingoSquare`: `{ id, word, isFilled, isAutoFilled, isFreeSpace, filledAt, row, col }`
- `WinningLine`: `{ type: 'row' | 'column' | 'diagonal', index, squares[] }`

### Speech Recognition

`useSpeechRecognition` hook wraps `window.SpeechRecognition || window.webkitSpeechRecognition` with `continuous: true`, `interimResults: true`. Auto-restarts on `onend` if still in listening state.

### Buzzword Categories (`src/data/categories.ts`)

Three categories: `agile`, `corporate`, `tech` — each ~45 words.

## Reference Docs

Complete reference implementations (types, components, hooks, logic) are in `docs/research/meeting-bingo-architecture.md`. Implementation phases and file structure are in `docs/implementation/implementation-plan.md`.

## Environment Variables

Environment variables are managed with [varlock](https://varlock.dev/env-spec) using the `@env-spec` format.

- **`.env.schema`** — source of truth for env var definitions (annotations, types, sensitivity)
- **`env.d.ts`** — autogenerated TypeScript types from `.env.schema`; do not edit directly

To regenerate `env.d.ts` after changing `.env.schema`:
```bash
varlock generate
```

Current required env vars:
- `LINEAR_API_KEY` — Linear project management API key (sensitive)
- `LINEAR_TOKEN` — alias required by the `linear-cli` CLI tool (same value as `LINEAR_API_KEY`)

## Tools

| Tool | Version | Purpose |
|------|---------|---------|
| `linear-cli` | 0.3.1 | Linear project management from the terminal |
| `varlock` | 0.2.3 | Environment variable schema management |
| `vercel` | 50.23.2 | Deployment and hosting |

## Linear CLI

`linear-cli` is installed globally. It requires `LINEAR_TOKEN` to be exported:

```bash
export $(grep -v '^#' .env | xargs) && linear cycle
```

Available commands:
- `linear cycle` — list issues for the current cycle
- `linear cycle +1` — list issues for the next cycle
- `linear issue <id>` — view a specific issue
